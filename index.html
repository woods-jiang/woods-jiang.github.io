
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Woods Jiang</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Woods Jiang">
    

    
    <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Woods Jiang">
<meta property="og:url" content="http://woodsjiang.com/index.html">
<meta property="og:site_name" content="Woods Jiang">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Woods Jiang">
<meta name="twitter:description">

    
    <link rel="alternative" href="/atom.xml" title="Woods Jiang" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Woods Jiang" title="Woods Jiang"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Woods Jiang">Woods Jiang</a></h1>
				<h2 class="blog-motto">Talk less. Think more. Do more than more.</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:woodsjiang.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/14/leetcode-Compare-Version-Numbers/" title="[leetcode]Compare Version Numbers" itemprop="url">[leetcode]Compare Version Numbers</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://woodsjiang.com/about" title="Woods Jiang" target="_blank" itemprop="author">Woods Jiang</a>
		
  <p class="article-time">
    <time datetime="2015-04-14T08:27:11.000Z" itemprop="datePublished"> 发表于 2015-04-14</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题目">题目</h1><p>Compare two version numbers <em>version1</em> and <em>version2</em>.<br>If <em>version1</em> &gt; <em>version2</em> return 1, if <em>version1</em> &lt; <em>version2</em> return -1, otherwise return 0.</p>
<p>You may assume that the version strings are non-empty and contain only digits and the <code>.</code> character.<br>The <code>.</code> character does not represent a decimal point and is used to separate number sequences.<br>For instance, <code>2.5</code> is not “two and a half” or “half way to version three”, it is the fifth second-level revision of the second first-level revision.</p>
<p>Here is an example of version numbers ordering:</p>
<pre><code>0.1 &lt; 1.1 &lt; 1.2 &lt; 13.37
</code></pre><h1 id="思路">思路</h1><p>以<code>.</code>为间隔，将每个段的字符串转化为整形数字之后再比较。</p>
<h1 id="C++代码">C++代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Solution &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">compareVersion</span><span class="params">(<span class="built_in">string</span> version1, <span class="built_in">string</span> version2)</span> </span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index1 = <span class="number">0</span>, index2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (index1 != version1.length() || index2 != version2.length())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> sum1 = <span class="number">0</span>, sum2 = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (index1 != version1.length())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (version1[index1] == <span class="string">'.'</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    index1++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                sum1 = sum1 * <span class="number">10</span> + version1[index1] - <span class="string">'0'</span>;</span><br><span class="line">                index1++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (index2 != version2.length())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (version2[index2] == <span class="string">'.'</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    index2++;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                sum2 = sum2 * <span class="number">10</span> + version2[index2] - <span class="string">'0'</span>;</span><br><span class="line">                index2++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (sum1 &gt; sum2)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="function"><span class="keyword">else</span> <span class="title">if</span> <span class="params">(sum1 &lt; sum2)</span></span><br><span class="line">            </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/leetcode/">leetcode</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/leetcode/">leetcode</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/14/leetcode-Compare-Version-Numbers/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>

  




   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/10/leetcode-NumberOfIslands/" title="[leetcode]Number of Islands" itemprop="url">[leetcode]Number of Islands</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://woodsjiang.com/about" title="Woods Jiang" target="_blank" itemprop="author">Woods Jiang</a>
		
  <p class="article-time">
    <time datetime="2015-04-10T06:58:36.000Z" itemprop="datePublished"> 发表于 2015-04-10</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="原题题目">原题题目</h1><p>Given a 2d grid map of <code>&#39;1&#39;</code>s (land) and <code>&#39;0&#39;</code>s (water), count the number of islands. An island is surrounded by water and is formed by connecting adjacent lands horizontally or vertically. You may assume all four edges of the grid are all surrounded by water.</p>
<p><strong><em>Example 1:</em></strong></p>
<pre><code>11110
11010
11000
00000
</code></pre><p>Answer: 1</p>
<p><strong><em>Example 2:</em></strong></p>
<pre><code>11000
11000
00100
00011
</code></pre><p>Answer: 3</p>
<h1 id="思路">思路</h1><p>采用深度优先搜索的方法，搜索值为1的char，找到一个1时，将其上下左右的值都设置为2，这样避免以后再次搜索到他们。</p>
<h1 id="C++代码如下">C++代码如下</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span>&lt;iostream&gt;</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span>&lt;vector&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Solution &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">numIslands</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt; &amp;grid)</span> </span>&#123;</span><br><span class="line">        m = grid.size();</span><br><span class="line">        <span class="keyword">if</span> (m &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        n = grid[<span class="number">0</span>].size();</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;n; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] != <span class="string">'1'</span>)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                ++result;</span><br><span class="line">                dfs(grid, i, j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt; &amp;grid, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i&lt;<span class="number">0</span> || i &gt;= m || j&lt;<span class="number">0</span> || j &gt;= n)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (grid[i][j] == <span class="string">'1'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            grid[i][j] = <span class="string">'2'</span>;</span><br><span class="line">            dfs(grid, i - <span class="number">1</span>, j);</span><br><span class="line">            dfs(grid, i + <span class="number">1</span>, j);</span><br><span class="line">            dfs(grid, i, j - <span class="number">1</span>);</span><br><span class="line">            dfs(grid, i, j + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// test</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    Solution obj;</span><br><span class="line"></span><br><span class="line">    <span class="stl_container"><span class="built_in">vector</span>&lt;<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;</span>&gt;</span> grid(<span class="number">4</span>,<span class="stl_container"><span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;</span>(<span class="number">5</span>));</span><br><span class="line"></span><br><span class="line">    grid[<span class="number">0</span>][<span class="number">0</span>] = <span class="string">'1'</span>;</span><br><span class="line">    grid[<span class="number">0</span>][<span class="number">1</span>] = <span class="string">'1'</span>;</span><br><span class="line">    grid[<span class="number">0</span>][<span class="number">2</span>] = <span class="string">'1'</span>;</span><br><span class="line">    grid[<span class="number">0</span>][<span class="number">3</span>] = <span class="string">'1'</span>;</span><br><span class="line">    grid[<span class="number">0</span>][<span class="number">4</span>] = <span class="string">'0'</span>;</span><br><span class="line"></span><br><span class="line">    grid[<span class="number">1</span>][<span class="number">0</span>] = <span class="string">'1'</span>;</span><br><span class="line">    grid[<span class="number">1</span>][<span class="number">1</span>] = <span class="string">'1'</span>;</span><br><span class="line">    grid[<span class="number">1</span>][<span class="number">2</span>] = <span class="string">'0'</span>;</span><br><span class="line">    grid[<span class="number">1</span>][<span class="number">3</span>] = <span class="string">'1'</span>;</span><br><span class="line">    grid[<span class="number">1</span>][<span class="number">4</span>] = <span class="string">'0'</span>;</span><br><span class="line"></span><br><span class="line">    grid[<span class="number">2</span>][<span class="number">0</span>] = <span class="string">'1'</span>;</span><br><span class="line">    grid[<span class="number">2</span>][<span class="number">1</span>] = <span class="string">'1'</span>;</span><br><span class="line">    grid[<span class="number">2</span>][<span class="number">2</span>] = <span class="string">'0'</span>;</span><br><span class="line">    grid[<span class="number">2</span>][<span class="number">3</span>] = <span class="string">'0'</span>;</span><br><span class="line">    grid[<span class="number">2</span>][<span class="number">4</span>] = <span class="string">'0'</span>;</span><br><span class="line"></span><br><span class="line">    grid[<span class="number">3</span>][<span class="number">0</span>] = <span class="string">'0'</span>;</span><br><span class="line">    grid[<span class="number">3</span>][<span class="number">1</span>] = <span class="string">'0'</span>;</span><br><span class="line">    grid[<span class="number">3</span>][<span class="number">2</span>] = <span class="string">'0'</span>;</span><br><span class="line">    grid[<span class="number">3</span>][<span class="number">3</span>] = <span class="string">'0'</span>;</span><br><span class="line">    grid[<span class="number">3</span>][<span class="number">4</span>] = <span class="string">'0'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; obj.numIslands(grid) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>采用广度优先搜索也可以呢。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/leetcode/">leetcode</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/leetcode/">leetcode</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/10/leetcode-NumberOfIslands/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>

  




   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/09/C++单例模式/" title="C++单例模式" itemprop="url">C++单例模式</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://woodsjiang.com/about" title="Woods Jiang" target="_blank" itemprop="author">Woods Jiang</a>
		
  <p class="article-time">
    <time datetime="2015-04-09T14:59:03.000Z" itemprop="datePublished"> 发表于 2015-04-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="单例模式定义">单例模式定义</h1><p>单例模式是设计模式的一种，即只能产生一个对象的类</p>
<h1 id="懒汉模式">懒汉模式</h1><p>所谓懒汉模式即第一次调用的时候才产生对象。这需要用锁才能够保证线程安全，但是如果处理大量数据时，性能不好。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> CSingleton</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> CSingleton* getInstance()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (NULL == m_instance)</span><br><span class="line">        &#123;</span><br><span class="line">            Lock();</span><br><span class="line">            <span class="keyword">if</span> (NULL == m_instance)</span><br><span class="line">            &#123;</span><br><span class="line">                m_instance = <span class="keyword">new</span> CSingleton;</span><br><span class="line">            &#125;</span><br><span class="line">            UnLock();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> m_instance;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">static</span> CSingleton* m_instance;</span><br><span class="line">    CSingleton()&#123;&#125;</span><br><span class="line">    CSingleton(<span class="keyword">const</span> CSingleton&amp;);</span><br><span class="line">    CSingleton &amp;<span class="keyword">operator</span> =(<span class="keyword">const</span> CSingleton&amp;);</span><br><span class="line">&#125;;</span><br><span class="line">CSingleton* CSingleton::m_instance = NULL;</span><br></pre></td></tr></table></figure>
<p><code>注意</code>，这里的普通构造函数、拷贝构造函数还有重载的操作符“=”都是私有的。而且拷贝构造函数和重载的“=”都不需要实现，这样的好处是即使是在友元类中也无法使用。</p>
<p>上面代码也并不完美，new出来的空间还没有被回收呢，我们都知道，在程序结束时，系统会自动析构所有的全局对象，系统也会自动析构所有类的静态成员变量，利用这个特征，我们在类里面加入一个类CGarbageCollector，在该类中定义一个静态成员变量，在其析构函数中释放单例模式中new出来的空间。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> CSingleton</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> CSingleton* getInstance()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (m_pInstance == NULL)</span><br><span class="line">        &#123;</span><br><span class="line">            m_pInstance = <span class="keyword">new</span> CSingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> m_pInstance;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    CSingleton()&#123;&#125;</span><br><span class="line">    CSingleton(<span class="keyword">const</span> CSingleton&amp;);</span><br><span class="line">    CSingleton &amp;<span class="keyword">operator</span> =(<span class="keyword">const</span> CSingleton&amp;);</span><br><span class="line">    <span class="keyword">static</span> CSingleton* m_pInstance;</span><br><span class="line">    <span class="keyword">class</span> CGarbageCollector</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        ~CGarbageCollector()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (CSingleton::m_pInstance)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">delete</span> CSingleton::m_pInstance;</span><br><span class="line">                CSingleton::m_pInstance = NULL;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">static</span> CGarbageCollector Garb;</span><br><span class="line">&#125;;</span><br><span class="line">CSingleton* CSingleton::m_pInstance = NULL;</span><br></pre></td></tr></table></figure>
<p>更加简洁的懒汉模式</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> CSingleton</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> CSingleton&amp; getInstance()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">static</span> CSingleton instance;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    CSingleton()&#123;&#125;</span><br><span class="line">    CSingleton(<span class="keyword">const</span> CSingleton&amp;);</span><br><span class="line">    CSingleton&amp; <span class="keyword">operator</span> = (<span class="keyword">const</span> CSingleton&amp;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这里巧妙的运用了静态变量，而且还不需要考虑销毁的问题，不过要非常<code>注意</code>的是，这里在C++0x及其以后的标准中才是线程安全的。</p>
<h1 id="饿汉模式">饿汉模式</h1><p>为什么叫做饿汉模式呢？这是相对于懒汉模式来说的，因为类的静态成员变量在执行主函数之前就初始化了的，也就是说，这个单例对象在主函数执行前就创建了，想饿汉一样，看见东西先吃了再说，这里就是不管三七二十一，不管用不用得上，先创建一个对象再说。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> CSingleton</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">static</span> CSingleton* getInstance()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> m_pInstance;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">static</span> CSingleton* m_pInstance;</span><br><span class="line">    CSingleton()&#123;&#125;</span><br><span class="line">    CSingleton(<span class="keyword">const</span> CSingleton &amp;);</span><br><span class="line">    CSingleton &amp; <span class="keyword">operator</span> = (<span class="keyword">const</span> CSingleton &amp;);</span><br><span class="line">    <span class="keyword">class</span> CGarbageCollector</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        ~CGarbageCollector()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (CSingleton::m_pInstance)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">delete</span> CSingleton::m_pInstance;</span><br><span class="line">                CSingleton::m_pInstance = NULL;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">static</span> CGarbageCollector Garb;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">CSingleton* CSingleton::m_pInstance = <span class="keyword">new</span> CSingleton;</span><br></pre></td></tr></table></figure>
<p>同样，采用了跟上面一样的方法来释放内存。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/C-C/">C/C++</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/C/">C++</a><a href="/tags/设计模式/">设计模式</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/09/C++单例模式/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>

  




   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/09/找出词典中所有的变位词/" title="找出词典中所有的变位词" itemprop="url">找出词典中所有的变位词</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://woodsjiang.com/about" title="Woods Jiang" target="_blank" itemprop="author">Woods Jiang</a>
		
  <p class="article-time">
    <time datetime="2015-04-09T11:34:04.000Z" itemprop="datePublished"> 发表于 2015-04-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="什么是变位词">什么是变位词</h1><p>两个词语所有的字母个数相同，但是字母顺序不一样的词语，成他们互为对方的变位词</p>
<h1 id="问题描述">问题描述</h1><p>给定一本词典，找出词典中的所有变位词</p>
<h1 id="解决思路">解决思路</h1><p>设置一个map来存储变位词，key是每个单词排列好的数序，value是一个存放string的set，用来存放所有的变位词。</p>
<pre><code>依次扫描每一个单词，并且排序
将排序好的单词作为<span class="variable">key</span>存放在<span class="built_in">map</span>中，而单词本身存放在value的<span class="built_in">set</span>容器中。
遍历输出<span class="built_in">map</span>，得到变位词表
</code></pre><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;iostream&gt;</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;fstream&gt;</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string&gt;</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;map&gt;</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;set&gt;</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;algorithm&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">charcomp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> x, <span class="keyword">const</span> <span class="keyword">char</span> y)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span>  x &lt; y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输入文件名字</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">anagramme</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; filename)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="function">ifstream <span class="title">ifs</span><span class="params">(filename)</span></span>;</span><br><span class="line">    <span class="function">ofstream <span class="title">ofs</span><span class="params">("output.txt")</span></span>;</span><br><span class="line">    <span class="built_in">string</span> word;</span><br><span class="line">    <span class="stl_container"><span class="built_in">map</span> &lt; <span class="built_in">string</span>, <span class="stl_container"><span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt;</span>&gt;</span> wordmap;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取词典</span></span><br><span class="line">    <span class="keyword">while</span> (ifs &gt;&gt; word)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> strTmp = word;</span><br><span class="line">        sort(word.begin(), word.end(), charcomp);</span><br><span class="line">        wordmap[word].insert(strTmp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 遍历输出</span></span><br><span class="line">    <span class="stl_container"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="stl_container"><span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt;</span>&gt;</span>::iterator mapIt = wordmap.begin();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (; mapIt != wordmap.end(); ++mapIt)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="stl_container"><span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt;</span>::iterator setIt = (mapIt-&gt;second).begin();</span><br><span class="line">        <span class="keyword">for</span> (; setIt != (mapIt-&gt;second).end(); ++setIt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; *setIt &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">            ofs &lt;&lt; *setIt &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; endl;</span><br><span class="line">        ofs &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ifs.close();</span><br><span class="line">    ofs.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    anagramme(<span class="string">"dict.txt"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Algorithm/">Algorithm</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Algorithm/">Algorithm</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/09/找出词典中所有的变位词/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>

  




   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/07/K-fold交叉验证/" title="K-fold交叉验证" itemprop="url">K-fold交叉验证</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://woodsjiang.com/about" title="Woods Jiang" target="_blank" itemprop="author">Woods Jiang</a>
		
  <p class="article-time">
    <time datetime="2015-04-07T03:16:27.000Z" itemprop="datePublished"> 发表于 2015-04-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="适用情况">适用情况</h1><p>假设你将要训练一组数据，现在有m个模型，由$M_{1…m}$表示，需要选择具体使用哪个模型。那么这时就可以用交叉验证来选择模型了。</p>
<h1 id="具体过程">具体过程</h1><p>一、将数据集分为训练集Train和测试集Test。</p>
<p>二、再将训练集Train分成<code>K</code>份，做交叉验证</p>
<p>   (1) 现在从模型$M_{1}$开始，将数据分成<code>K</code>份（K=10比较常见），将其中的9份作为训练集，剩下的一份作为测试集，得到一个评分；然后依次选取一个不同的测试集，剩下的9份作为训练集，直到10份数据每一分都做过一次测试集为止，这时，我们得到10个评分，将这10个评分取平均值，得到模型M1的评分$f_1$。</p>
<p>   (2) 现在开始对模型$M_2$做评分，跟上面采用一样的验证方法，最终得到评分$f_2$</p>
<p>   (3) m个模型，一共得到了m个评分，最终取效果最好的那个模型$M_i$。</p>
<p>三、使用这个评分最好的模型$M_i$的参数，对所有的训练集Train再训练一次。最终数据就训练好了，然后在最开始划分的测试数据集Test上进行测试。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Machine-Learning/">Machine Learning</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Machine-Learning/">Machine Learning</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/07/K-fold交叉验证/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>

  




   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/07/在matlab中添加livsvm及其使用介绍/" title="在matlab中添加livsvm及其使用介绍" itemprop="url">在matlab中添加livsvm及其使用介绍</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://woodsjiang.com/about" title="Woods Jiang" target="_blank" itemprop="author">Woods Jiang</a>
		
  <p class="article-time">
    <time datetime="2015-04-07T01:12:57.000Z" itemprop="datePublished"> 发表于 2015-04-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="安装">安装</h1><p>livsvm3.20+matlab2014a</p>
<p>在网上看到很多方法都是比较老版本的libsvm了，现在新版本是不用编译的，在文件夹中已经编译好了，只需要我们将其添加到matlab对应的文件夹中即可。</p>
<p>首先，<a href="http://www.csie.ntu.edu.tw/~cjlin/libsvm/" target="_blank" rel="external">下载livsvm</a>，我下载的是3.20版本的</p>
<p>然后将其解压到matlab的安装文件夹下面（当然，任意文件夹都可以，主要是你下一步设置路径时，能够找到就行了）。</p>
<p>最后，设置路径，如下图，注意，只需要将libsvm目录下的windows这个目录加入到其路径即可。<br><img src="http://7xifo1.com1.z0.glb.clouddn.com/matlab_libsvm.jpg" alt=""></p>
<h1 id="使用">使用</h1><p>读入livsvm自带的一个数据集<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[heart_scale_label, heart_scale_inst] =libsvmread('heart_scale');</span><br></pre></td></tr></table></figure></p>
<p>注意！这个地方的“heart_scale”文件存在于libsvm目录下，虽然我们刚才将这个文件夹添加到了路径中，但是还是不能直接读取，需要将执行路径切换到该目录下，才能够读取文件。</p>
<p>开始训练<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model = svmtrain(heart_scale_label,heart_scale_inst);</span><br></pre></td></tr></table></figure></p>
<p>当然这里默认的是线性svm，如果需要其他的方法可以在函数的后面加上参数。</p>
<p>预测结果<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">svmpredict(heart_scale_label,heart_scale_inst,model);</span><br><span class="line">Accuracy = <span class="number">86.6667</span>% (<span class="number">234</span>/<span class="number">270</span>) (classification)</span><br></pre></td></tr></table></figure></p>
<p>下面看看svm的高斯核函数在上面例子的威力，训练参数设置如下<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model = svmtrain(heart_scale_label,heart_scale_inst, '-s 0 -t 2 -g 2');</span><br></pre></td></tr></table></figure></p>
<p>预测结果<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">svmpredict(heart_scale_label, heart_scale_inst, model);</span><br><span class="line">Accuracy = <span class="number">99.2593</span>% (<span class="number">268</span>/<span class="number">270</span>) (classification)</span><br></pre></td></tr></table></figure></p>
<p>当然，这并不是最佳的参数，设置‘-g 3’时，还可以达到99.6296%</p>
<p>下面是一些参数的具体意思<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">-s</span> svm_<span class="built_in">type</span> : <span class="built_in">set</span> <span class="built_in">type</span> of SVM (default <span class="number">0</span>)</span><br><span class="line">	<span class="number">0</span> -- C-SVC		(multi-class classification)</span><br><span class="line">	<span class="number">1</span> -- nu-SVC		(multi-class classification)</span><br><span class="line">	<span class="number">2</span> -- one-class SVM	</span><br><span class="line">	<span class="number">3</span> -- epsilon-SVR	(regression)</span><br><span class="line">	<span class="number">4</span> -- nu-SVR		(regression)</span><br><span class="line">-t kernel_<span class="built_in">type</span> : <span class="built_in">set</span> <span class="built_in">type</span> of kernel <span class="keyword">function</span> (default <span class="number">2</span>)</span><br><span class="line">	<span class="number">0</span> -- linear: u<span class="string">'*v</span><br><span class="line">	1 -- polynomial: (gamma*u'</span>*v + coef0)^degree</span><br><span class="line">	<span class="number">2</span> -- radial basis <span class="keyword">function</span>: exp(-gamma*|u-v|^<span class="number">2</span>)</span><br><span class="line">	<span class="number">3</span> -- sigmoid: tanh(gamma*u<span class="string">'*v + coef0)</span><br><span class="line">	4 -- precomputed kernel (kernel values in training_set_file)</span><br><span class="line">-d degree : set degree in kernel function (default 3)</span><br><span class="line">-g gamma : set gamma in kernel function (default 1/num_features)</span><br><span class="line">-r coef0 : set coef0 in kernel function (default 0)</span><br><span class="line">-c cost : set the parameter C of C-SVC, epsilon-SVR, and nu-SVR (default 1)</span><br><span class="line">-n nu : set the parameter nu of nu-SVC, one-class SVM, and nu-SVR (default 0.5)</span><br><span class="line">-p epsilon : set the epsilon in loss function of epsilon-SVR (default 0.1)</span><br><span class="line">-m cachesize : set cache memory size in MB (default 100)</span><br><span class="line">-e epsilon : set tolerance of termination criterion (default 0.001)</span><br><span class="line">-h shrinking : whether to use the shrinking heuristics, 0 or 1 (default 1)</span><br><span class="line">-b probability_estimates : whether to train a SVC or SVR model for probability estimates, 0 or 1 (default 0)</span><br><span class="line">-wi weight : set the parameter C of class i to weight*C, for C-SVC (default 1)</span><br><span class="line">-v n: n-fold cross validation mode</span><br><span class="line">-q : quiet mode (no outputs)</span></span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Machine-Learning/">Machine Learning</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Machine-Learning/">Machine Learning</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/07/在matlab中添加livsvm及其使用介绍/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>

  




   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/05/STL中at访问元素与-访问元素的区别/" title="STL中at访问元素与[]访问元素的区别" itemprop="url">STL中at访问元素与[]访问元素的区别</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://woodsjiang.com/about" title="Woods Jiang" target="_blank" itemprop="author">Woods Jiang</a>
		
  <p class="article-time">
    <time datetime="2015-04-05T14:38:08.000Z" itemprop="datePublished"> 发表于 2015-04-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="首先是我的gcc4-8-2版本中的at方法的实现">首先是我的gcc4.8.2版本中的at方法的实现</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">reference</span><br><span class="line"><span class="title">at</span><span class="params">(size_type __n)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	_M_range_check(__n);</span><br><span class="line">	<span class="keyword">return</span> (*<span class="keyword">this</span>)[__n]; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">const_reference</span><br><span class="line"><span class="title">at</span><span class="params">(size_type __n)</span> <span class="keyword">const</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	_M_range_check(__n);</span><br><span class="line">	<span class="keyword">return</span> (*<span class="keyword">this</span>)[__n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后是其中<code>[]</code>的实现：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">reference</span><br><span class="line"><span class="keyword">operator</span>[](size_type __n)</span><br><span class="line">&#123; <span class="keyword">return</span> *(<span class="keyword">this</span>-&gt;_M_impl._M_start + __n); &#125;</span><br><span class="line"></span><br><span class="line">const_reference</span><br><span class="line"><span class="keyword">operator</span>[](size_type __n) <span class="keyword">const</span></span><br><span class="line">&#123; <span class="keyword">return</span> *(<span class="keyword">this</span>-&gt;_M_impl._M_start + __n); &#125;</span><br></pre></td></tr></table></figure></p>
<p>从上面我们可以发现，gcc中的<code>at</code>方法应该更加高效，因为用<code>[]</code>方法访问的时候，还做了一次加法，但是VS2013中，微软自家改版的Vector却不是这样。</p>
<h1 id="VS2013中，对Vector的实现">VS2013中，对Vector的实现</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">const_reference <span class="title">at</span><span class="params">(size_type _Pos)</span> <span class="keyword">const</span></span><br><span class="line">	</span>&#123;	<span class="comment">// subscript nonmutable sequence with checking</span></span><br><span class="line">	<span class="keyword">if</span> (size() &lt;= _Pos)</span><br><span class="line">		_Xran();</span><br><span class="line">	<span class="keyword">return</span> (*(<span class="keyword">this</span>-&gt;_Myfirst + _Pos));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">reference <span class="title">at</span><span class="params">(size_type _Pos)</span></span><br><span class="line">	</span>&#123;	<span class="comment">// subscript mutable sequence with checking</span></span><br><span class="line">	<span class="keyword">if</span> (size() &lt;= _Pos)</span><br><span class="line">		_Xran();</span><br><span class="line">	<span class="keyword">return</span> (*(<span class="keyword">this</span>-&gt;_Myfirst + _Pos));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">const_reference <span class="keyword">operator</span>[](size_type _Pos) <span class="keyword">const</span></span><br><span class="line">		&#123;	<span class="comment">// subscript nonmutable sequence</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">if</span> _ITERATOR_DEBUG_LEVEL == 2</span></span><br><span class="line">	<span class="keyword">if</span> (size() &lt;= _Pos)</span><br><span class="line">		&#123;	<span class="comment">// report error</span></span><br><span class="line">		_DEBUG_ERROR(<span class="string">"vector subscript out of range"</span>);</span><br><span class="line">		_SCL_SECURE_OUT_OF_RANGE;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="preprocessor">#<span class="keyword">elif</span> _ITERATOR_DEBUG_LEVEL == 1</span></span><br><span class="line">		_SCL_SECURE_VALIDATE_RANGE(_Pos &lt; size());</span><br><span class="line"><span class="preprocessor">#<span class="keyword">endif</span> /* _ITERATOR_DEBUG_LEVEL */</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> (*(<span class="keyword">this</span>-&gt;_Myfirst + _Pos));</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	reference <span class="keyword">operator</span>[](size_type _Pos)</span><br><span class="line">		&#123;	<span class="comment">// subscript mutable sequence</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">if</span> _ITERATOR_DEBUG_LEVEL == 2</span></span><br><span class="line">		<span class="keyword">if</span> (size() &lt;= _Pos)</span><br><span class="line">			&#123;	<span class="comment">// report error</span></span><br><span class="line">			_DEBUG_ERROR(<span class="string">"vector subscript out of range"</span>);</span><br><span class="line">			_SCL_SECURE_OUT_OF_RANGE;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">elif</span> _ITERATOR_DEBUG_LEVEL == 1</span></span><br><span class="line">		_SCL_SECURE_VALIDATE_RANGE(_Pos &lt; size());</span><br><span class="line"><span class="preprocessor">#<span class="keyword">endif</span> /* _ITERATOR_DEBUG_LEVEL */</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> (*(<span class="keyword">this</span>-&gt;_Myfirst + _Pos));</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>
<p>从中我们可以发现，无论是<code>at</code>方法还是<code>[]</code>方法，都是采用头指针加上偏移量来实现的，为什么不都像第一个<code>at</code>方法那样，直接返回呢？</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/STL/">STL</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/STL/">STL</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/05/STL中at访问元素与-访问元素的区别/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>

  




   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/04/leetcode-bash-Word-Frequency/" title="[leetcode][bash]Word Frequency" itemprop="url">[leetcode][bash]Word Frequency</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://woodsjiang.com/about" title="Woods Jiang" target="_blank" itemprop="author">Woods Jiang</a>
		
  <p class="article-time">
    <time datetime="2015-04-04T06:51:49.000Z" itemprop="datePublished"> 发表于 2015-04-04</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="题目">题目</h1><p>来源：<a href="https://leetcode.com/problems/word-frequency/" target="_blank" rel="external">https://leetcode.com/problems/word-frequency/</a><br>Write a bash script to calculate the frequency of each word in a text file <code>words.txt</code>.</p>
<p>For simplicity sake, you may assume:</p>
<ul>
<li><code>words.txt</code> contains only lowercase characters and space <code>&#39; &#39;</code> characters.</li>
<li>Each word must consist of lowercase characters only.</li>
<li>Words are separated by one or more whitespace characters.</li>
</ul>
<p>For example, assume that <code>words.txt</code> has the following content:</p>
<pre><code><span class="keyword">the</span> <span class="property">day</span> <span class="keyword">is</span> sunny <span class="keyword">the</span> <span class="keyword">the</span>
<span class="keyword">the</span> sunny <span class="keyword">is</span> <span class="keyword">is</span>
</code></pre><p>Your script should output the following, sorted by descending frequency:</p>
<pre><code><span class="keyword">the</span> <span class="number">4</span>
<span class="keyword">is</span> <span class="number">3</span>
sunny <span class="number">2</span>
<span class="property">day</span> <span class="number">1</span>
</code></pre><p><strong>Note:</strong><br>Don’t worry about handling ties, it is guaranteed that each word’s frequency count is unique.</p>
<h1 id="Bash脚本">Bash脚本</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat words.txt | tr <span class="operator">-s</span> <span class="string">' '</span> <span class="string">'\n'</span>|sort|uniq -c|sort -rn| awk <span class="string">'&#123;print $2" "$1&#125;'</span></span><br></pre></td></tr></table></figure>
<p>解释：<br>tr -s：使用指定字符串替换出现一次或者连续出现多次的字符串，这里就是将一个或者多个空格换成换行符<br>sort：将单词从小到大排序<br>uniq -c：uniq用来去掉连续出现的单词<br>sort -rn：sort默认是升序排列，-r则表示降序，-n则是按照数值大小排序<br>awk ‘{print$2” “$1}’：则是格式化输出，内容的每一行为<code>“ ”</code>中的内容</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/leetcode/">leetcode</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/leetcode/">leetcode</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/04/leetcode-bash-Word-Frequency/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>

  




   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/03/31/hello-world/" title="Hello World" itemprop="url">Hello World</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://woodsjiang.com/about" title="Woods Jiang" target="_blank" itemprop="author">Woods Jiang</a>
		
  <p class="article-time">
    <time datetime="2015-03-31T13:19:30.124Z" itemprop="datePublished"> 发表于 2015-03-31</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2><h3 id="Create_a_new_post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/03/31/hello-world/#disqus_thread" class="comments-count-link">Comments</a>
	
</div>

</footer>


    </article>

  





</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Algorithm/" title="Algorithm">Algorithm<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/C-C/" title="C/C++">C/C++<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Machine-Learning/" title="Machine Learning">Machine Learning<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/STL/" title="STL">STL<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/leetcode/" title="leetcode">leetcode<sup>3</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/leetcode/" title="leetcode">leetcode<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Machine-Learning/" title="Machine Learning">Machine Learning<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Algorithm/" title="Algorithm">Algorithm<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/STL/" title="STL">STL<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C++">C++<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/设计模式/" title="设计模式">设计模式<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://github.com/woods-jiang" target="_blank" title="我的github">我的github</a>
            
          </li>
        
          <li>
            
            	<a href="http://weibo.com/woodsjiang" target="_blank" title="我的新浪微博">我的新浪微博</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.douban.com/people/124560646" target="_blank" title="我的豆瓣">我的豆瓣</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=5059000554&verifier=a3fec3ea&dpc=1"></iframe>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> If you’re bored, you’re doing something wrong. <br/>
			Devils are in the details.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2015 
		
		<a href="http://woodsjiang.com/about" target="_blank" title="Woods Jiang">Woods Jiang</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>





<script type="text/javascript">

var disqus_shortname = 'woodsjiang';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>








<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

<script type="text/x-mathjax-config"> 
MathJax.Hub.Config({ 
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} 
}); 
</script>
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </body>
 </html>
